# Comparing `tmp/pyats_image_builder-23.3-py3-none-any.whl.zip` & `tmp/pyats_image_builder-23.4-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,19 +1,19 @@
-Zip file size: 23241 bytes, number of entries: 17
--rw-r--r--  2.0 unx     1908 b- defN 23-Mar-21 21:18 pyatsimagebuilder/Dockerfile.template
--rw-r--r--  2.0 unx      126 b- defN 23-Mar-30 17:25 pyatsimagebuilder/__init__.py
--rw-r--r--  2.0 unx      502 b- defN 23-Mar-21 21:18 pyatsimagebuilder/askpass.py
--rw-r--r--  2.0 unx    18223 b- defN 23-Mar-21 21:18 pyatsimagebuilder/builder.py
--rw-r--r--  2.0 unx     2324 b- defN 23-Mar-21 21:18 pyatsimagebuilder/commands.py
--rw-r--r--  2.0 unx     2126 b- defN 23-Mar-21 21:18 pyatsimagebuilder/context.py
--rwxr-xr-x  2.0 unx      480 b- defN 23-Mar-21 21:18 pyatsimagebuilder/docker-entrypoint.sh
--rw-r--r--  2.0 unx     2869 b- defN 23-Mar-21 21:18 pyatsimagebuilder/image.py
--rw-r--r--  2.0 unx     2302 b- defN 23-Mar-21 21:18 pyatsimagebuilder/main.py
--rw-r--r--  2.0 unx     6004 b- defN 23-Mar-21 21:18 pyatsimagebuilder/schema.py
--rw-r--r--  2.0 unx    15185 b- defN 23-Mar-21 21:18 pyatsimagebuilder/utils.py
--rw-r--r--  2.0 unx    11357 b- defN 23-Mar-30 17:25 pyats_image_builder-23.3.dist-info/LICENSE
--rw-r--r--  2.0 unx     1589 b- defN 23-Mar-30 17:25 pyats_image_builder-23.3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Mar-30 17:25 pyats_image_builder-23.3.dist-info/WHEEL
--rw-r--r--  2.0 unx      195 b- defN 23-Mar-30 17:25 pyats_image_builder-23.3.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       18 b- defN 23-Mar-30 17:25 pyats_image_builder-23.3.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1496 b- defN 23-Mar-30 17:25 pyats_image_builder-23.3.dist-info/RECORD
-17 files, 66796 bytes uncompressed, 20755 bytes compressed:  68.9%
+Zip file size: 23313 bytes, number of entries: 17
+-rw-r--r--  2.0 unx     1908 b- defN 23-Apr-21 18:08 pyatsimagebuilder/Dockerfile.template
+-rw-r--r--  2.0 unx      126 b- defN 23-Apr-21 18:08 pyatsimagebuilder/__init__.py
+-rw-r--r--  2.0 unx      502 b- defN 23-Apr-21 18:08 pyatsimagebuilder/askpass.py
+-rw-r--r--  2.0 unx    18385 b- defN 23-Apr-21 18:08 pyatsimagebuilder/builder.py
+-rw-r--r--  2.0 unx     2324 b- defN 23-Apr-21 18:08 pyatsimagebuilder/commands.py
+-rw-r--r--  2.0 unx     2126 b- defN 23-Apr-21 18:08 pyatsimagebuilder/context.py
+-rwxr-xr-x  2.0 unx      480 b- defN 23-Apr-21 18:08 pyatsimagebuilder/docker-entrypoint.sh
+-rw-r--r--  2.0 unx     2898 b- defN 23-Apr-21 18:08 pyatsimagebuilder/image.py
+-rw-r--r--  2.0 unx     2302 b- defN 23-Apr-21 18:08 pyatsimagebuilder/main.py
+-rw-r--r--  2.0 unx     6066 b- defN 23-Apr-21 18:08 pyatsimagebuilder/schema.py
+-rw-r--r--  2.0 unx    15325 b- defN 23-Apr-21 18:08 pyatsimagebuilder/utils.py
+-rw-r--r--  2.0 unx    11357 b- defN 23-Apr-21 18:46 pyats_image_builder-23.4.dist-info/LICENSE
+-rw-r--r--  2.0 unx     1589 b- defN 23-Apr-21 18:46 pyats_image_builder-23.4.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-21 18:46 pyats_image_builder-23.4.dist-info/WHEEL
+-rw-r--r--  2.0 unx      195 b- defN 23-Apr-21 18:46 pyats_image_builder-23.4.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       18 b- defN 23-Apr-21 18:46 pyats_image_builder-23.4.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     1496 b- defN 23-Apr-21 18:46 pyats_image_builder-23.4.dist-info/RECORD
+17 files, 67189 bytes uncompressed, 20827 bytes compressed:  69.0%
```

## zipnote {}

```diff
@@ -27,26 +27,26 @@
 
 Filename: pyatsimagebuilder/schema.py
 Comment: 
 
 Filename: pyatsimagebuilder/utils.py
 Comment: 
 
-Filename: pyats_image_builder-23.3.dist-info/LICENSE
+Filename: pyats_image_builder-23.4.dist-info/LICENSE
 Comment: 
 
-Filename: pyats_image_builder-23.3.dist-info/METADATA
+Filename: pyats_image_builder-23.4.dist-info/METADATA
 Comment: 
 
-Filename: pyats_image_builder-23.3.dist-info/WHEEL
+Filename: pyats_image_builder-23.4.dist-info/WHEEL
 Comment: 
 
-Filename: pyats_image_builder-23.3.dist-info/entry_points.txt
+Filename: pyats_image_builder-23.4.dist-info/entry_points.txt
 Comment: 
 
-Filename: pyats_image_builder-23.3.dist-info/top_level.txt
+Filename: pyats_image_builder-23.4.dist-info/top_level.txt
 Comment: 
 
-Filename: pyats_image_builder-23.3.dist-info/RECORD
+Filename: pyats_image_builder-23.4.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## pyatsimagebuilder/__init__.py

```diff
@@ -1,6 +1,6 @@
 from .image import Image
 from .builder import ImageBuilder
 
 # metadata
-__version__ = '23.3'
+__version__ = '23.4'
 __author__ = 'Cisco Systems Inc.'
```

## pyatsimagebuilder/builder.py

```diff
@@ -78,14 +78,17 @@
             self.context.mkdir(INSTALLATION / REQUIREMENTS)
 
             self._populate_context()
 
             # Tag for docker image   argument (cli) > config (yaml) > None
             self.image.tag = tag or self.config.get('tag', None)
 
+            # Get Arch for image
+            self.image.platform = self.config.get('platform', None)
+
             # Start docker build
             if not dry_run:
                 self._logger.info('Building image')
                 self._build_image(no_cache=no_cache)
                 self._logger.info("Built image '%s' successfully" %
                                   tag if tag else self.image.id)
 
@@ -414,14 +417,15 @@
         api = docker.from_env().api
         build_error = []
 
         # Trigger docker build
         for line in api.build(path=str(self.context.path),
                               dockerfile=str(INSTALLATION / 'Dockerfile'),
                               tag=self.image.tag,
+                              platform=self.image.platform,
                               rm=True,
                               forcerm=True,
                               buildargs=self._docker_build_args,
                               decode=True,
                               nocache=no_cache):
 
             # If we encounter an error, capture it
```

## pyatsimagebuilder/image.py

```diff
@@ -31,14 +31,15 @@
         self.base_image_label = base_image_label
         self.tini_version = tini_version
         self.workspace_dir = os.path.join('/', workspace_name)
 
         # docker id and tag
         self.id = None
         self.tag = None
+        self.platform = None
 
         # environment variables
         self.env = env or {}
 
         # commands to run before/after pip installation
         self.pre_pip_cmds = pre_pip_cmds
         self.post_pip_cmds = post_pip_cmds
```

## pyatsimagebuilder/schema.py

```diff
@@ -27,14 +27,17 @@
                 }, {
                     'type': 'number'
                 }, {
                     'type': 'boolean'
                 }]
             }
         },
+        'platform': {
+            'type': 'string'
+        },
         'files': {
             'type': 'array',
             'items': {
                 # File can be a string or a specific dict
                 'oneOf': [
                     {
                         'type': 'object',
```

## pyatsimagebuilder/utils.py

```diff
@@ -425,22 +425,25 @@
         # Find any repo containing this manifest file
         for repo in repo_data:
             if manifest_data['file'].startswith(repo):
                 manifest_data['repo_path'] = repo
                 break
 
         manifest_data['run_type'] = 'manifest'
-        manifest_data['job_type'] = manifest_data.pop('type')
+        manifest_data['job_type'] = manifest_data.pop('type', None)
+        if not manifest_data['job_type']:
+            logger.warning(f'No job type specified in {manifest}')
+            continue
 
         # Pop runtimes and profiles to add them back later as lists
         runtimes = manifest_data.pop('runtimes', {})
         profiles = manifest_data.pop('profiles', {})
 
         # Create default profile from top level arguments and system environment
-        default_arguments = manifest_data.pop('arguments')
+        default_arguments = manifest_data.pop('arguments', {})
         default_runtime = runtimes.get('system', {})
         default_environment = default_runtime.get('environment', {})
         profiles['DEFAULT'] = {}
         profiles['DEFAULT']['runtime'] = 'system'
         profiles['DEFAULT']['arguments'] = default_arguments
         profiles['DEFAULT']['environment'] = default_environment
```

## Comparing `pyats_image_builder-23.3.dist-info/LICENSE` & `pyats_image_builder-23.4.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `pyats_image_builder-23.3.dist-info/METADATA` & `pyats_image_builder-23.4.dist-info/METADATA`

 * *Files 7% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pyats-image-builder
-Version: 23.3
+Version: 23.4
 Summary: pyATS Docker image creation
 Home-page: https://developer.cisco.com/docs/pyats/
 Author: Cisco Systems Inc.
 Author-email: pyats-support-ext@cisco.com
 License: Cisco Systems, Inc. Cisco Confidential
 Keywords: pyats cisco development packaging docker
 Classifier: Development Status :: 5 - Production/Stable
```

## Comparing `pyats_image_builder-23.3.dist-info/RECORD` & `pyats_image_builder-23.4.dist-info/RECORD`

 * *Files 16% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 pyatsimagebuilder/Dockerfile.template,sha256=xGs6lVP7QGzxWOZClaDK_RTFe--KvXTIsvHpEQ8m31s,1908
-pyatsimagebuilder/__init__.py,sha256=FjHFLNgknf5TBBgfIdcr5Nj2rHot0N7UJQ7saK3hdq4,126
+pyatsimagebuilder/__init__.py,sha256=-tfiTTkqNXnWgJddor7e5iQRH4kZweKoiHujKSmT4fU,126
 pyatsimagebuilder/askpass.py,sha256=bUH7AMtUiHFlVyvozofAFCS533kNB_IckEm5Qp2_630,502
-pyatsimagebuilder/builder.py,sha256=SxuHO-ZCd0iO7uSyauh0pxLMhQW5kZgtljLyriNc3SU,18223
+pyatsimagebuilder/builder.py,sha256=iscYw8J5Br6AL9XK_8r590ZsciybwtDqxYWuZmf9_kE,18385
 pyatsimagebuilder/commands.py,sha256=-bj_RYAIlSxUieUAWdCiJUejTvoCiudWPNip-XaxPW0,2324
 pyatsimagebuilder/context.py,sha256=xDTLzLDv82bPB25TQDfnLWXl-1cv0MS7p8GwCLYAHCM,2126
 pyatsimagebuilder/docker-entrypoint.sh,sha256=EmyRNLx7CgtuCCHtakxOfSzhs9ZhtwlxU11KBs4DvZo,480
-pyatsimagebuilder/image.py,sha256=z1UNYVy54C_gapBokw2p_gWmdYy3B_TDjDhVSJoiw4I,2869
+pyatsimagebuilder/image.py,sha256=G8HoDmXcj9vc90zYrPqdkRdxkPibbCNErHj8-ml0vlc,2898
 pyatsimagebuilder/main.py,sha256=s0l2FtYd05mqwQpD_urVIjMTyrlN1NknEyW5kJ7fPBk,2302
-pyatsimagebuilder/schema.py,sha256=hg3rArtQYU3WB9bcXK289ejCYBelXYhrxbPdO9E1P4k,6004
-pyatsimagebuilder/utils.py,sha256=eG6EzwtTtv5IoapUhKarYZqq6OJpKYn0t-0dfOvYnN4,15185
-pyats_image_builder-23.3.dist-info/LICENSE,sha256=xx0jnfkXJvxRnG63LTGOxlggYnIysveWIZ6H3PNdCrQ,11357
-pyats_image_builder-23.3.dist-info/METADATA,sha256=WD8MSTI7iSL3_PGanCfRtiUqWQlSVe_lMkz5_EQEE6o,1589
-pyats_image_builder-23.3.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-pyats_image_builder-23.3.dist-info/entry_points.txt,sha256=7OKwkEeuyP0ryPAml3wYtX2hkLP6DCSSHUUuTWkMm7Y,195
-pyats_image_builder-23.3.dist-info/top_level.txt,sha256=qKjZF4Wj4_SehDQlofxWMrjY8HE949V4thrcAO7QbxA,18
-pyats_image_builder-23.3.dist-info/RECORD,,
+pyatsimagebuilder/schema.py,sha256=Ui_T2xWW-6d2WbzgNgvBp10_OGvJ8FJZrmGplUygqgc,6066
+pyatsimagebuilder/utils.py,sha256=6w5npX--XVbJQzO6ox0bGNfx204FYIZPlEksRZdqAY4,15325
+pyats_image_builder-23.4.dist-info/LICENSE,sha256=xx0jnfkXJvxRnG63LTGOxlggYnIysveWIZ6H3PNdCrQ,11357
+pyats_image_builder-23.4.dist-info/METADATA,sha256=hBlHYDv1SwN2gawXeIfGVr_bs6yKYoT7p5v2I5Wb8fA,1589
+pyats_image_builder-23.4.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+pyats_image_builder-23.4.dist-info/entry_points.txt,sha256=7OKwkEeuyP0ryPAml3wYtX2hkLP6DCSSHUUuTWkMm7Y,195
+pyats_image_builder-23.4.dist-info/top_level.txt,sha256=qKjZF4Wj4_SehDQlofxWMrjY8HE949V4thrcAO7QbxA,18
+pyats_image_builder-23.4.dist-info/RECORD,,
```

